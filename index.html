<!DOCTYPE html>
<html>
<head>
  <title>Narrative Visualization with D3</title>
  <style>
    /* Add your CSS styling here */
  </style>
</head>
<body>
  <div class="container">
    <!-- Your visualization will be appended here -->
  </div>

  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="https://unpkg.com/d3-annotation@2.3.0/dist/d3-annotation.min.js"></script>
  <script src="https://unpkg.com/topojson-client@3.1.0/dist/topojson-client.min.js"></script>

  <script>
    // Sample dataset (you can replace this with the actual dataset)
    const dataset = [
      { Make: "Acura", Fuel: "Gasoline", EngineCylinders: 4, AverageHighwayMPG: 35, AverageCityMPG: 25 },
      { Make: "Acura", Fuel: "Gasoline", EngineCylinders: 6, AverageHighwayMPG: 28, AverageCityMPG: 21 },
      // Add more data points here
    ];

    // Set up the dimensions and margins for the scatter plot
    const margin = { top: 20, right: 30, bottom: 30, left: 40 };
    const width = 800 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    // Create the SVG container for the scatter plot
    const svg = d3.select('.container')
      .append('svg')
      .attr('width', width + margin.left + margin.right)
      .attr('height', height + margin.top + margin.bottom)
      .append('g')
      .attr('transform', `translate(${margin.left},${margin.top})`);

    // Define the scales for the x and y axes
    const xScale = d3.scaleLinear()
      .domain([0, d3.max(dataset, d => d.AverageHighwayMPG)])
      .range([0, width]);

    const yScale = d3.scaleLinear()
      .domain([0, d3.max(dataset, d => d.AverageCityMPG)])
      .range([height, 0]);

    // Create the scatter plot circles
    const circles = svg.selectAll('circle')
      .data(dataset)
      .enter()
      .append('circle')
      .attr('cx', d => xScale(d.AverageHighwayMPG))
      .attr('cy', d => yScale(d.AverageCityMPG))
      .attr('r', 5)
      .style('fill', 'blue');

    // Create annotations for data points
    const annotations = d3.annotation()
      .type(d3.annotationCalloutCircle)
      .annotations(dataset.map((d, i) => ({
        note: { title: d.Make, label: `City MPG: ${d.AverageCityMPG}, Highway MPG: ${d.AverageHighwayMPG}` },
        x: xScale(d.AverageHighwayMPG),
        y: yScale(d.AverageCityMPG),
        dx: -30,
        dy: 30
      })));

    svg.append('g')
      .call(annotations);

  </script>
</body>
</html>

